!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.calcite=e()}(this,function(){"use strict";function t(t,e){var n;for(n=e;n;n=n.parentNode){var o=n&&n.getAttribute&&n.getAttribute("class")||"",r=new RegExp("(\\s|^)"+t+"(\\s|$)").test(o);if(1===n.nodeType&&r)break}return n}function e(t){return Array.isArray(t)?t:Array.prototype.slice.call(t)}function n(t,n){return e((n||document).querySelectorAll(t))}function o(t,e){return new RegExp("(\\s|^)"+e+"(\\s|$)").test(t.getAttribute("class"))}function r(t,e){e.split(" ").forEach(function(e){if(!o(t,e)){var n=t.getAttribute("class")||"";t.setAttribute("class",n+" "+e)}})}function i(t,e){e.split(" ").forEach(function(e){var n=(t.getAttribute("class")||"").replace(new RegExp("(\\s|^)"+e+"(\\s|$)","g"),"$2");o(t,e)&&t.setAttribute("class",n)})}function a(t,e){o(t,e)?i(t,e):r(t,e)}function c(t){(t=e(t)).forEach(function(t){i(t,"is-active")})}function d(t,e){c(t),r(e,"is-active")}function u(t){t.forEach(function(t){t&&t.setAttribute("aria-hidden",!0)})}function l(t){t.forEach(function(t){t&&t.removeAttribute("aria-hidden")})}function s(t){if(t){t.getAttribute("aria-expanded")?t.removeAttribute("aria-expanded"):t.setAttribute("aria-expanded","true")}}function f(){return"click"}function v(t,e,n){return t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):void 0}function p(t,e,n){return t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent?t.detachEvent("on"+e,n):void 0}function m(t){return t.target||t.srcElement}function b(t){if(t.preventDefault)return t.preventDefault();t.returnValue&&(t.returnValue=!1)}function h(t){if((t=t||window.event).stopPropagation)return t.stopPropagation();t.cancelBubble&&(t.cancelBubble=!0)}function w(t,e,n){var o,r,i,a;return a=function(){o=!1,r&&(i.apply(n,r),r=!1)},i=function(){o?r=arguments:(t.apply(n,arguments),setTimeout(a,e),o=!0)}}function g(){}function y(t){for(var e="",n=0;n<t;n++)e+=(65536*(1+Math.random())|0).toString(16).substring(1);return e}function k(t){if(!t)throw new TypeError("Invalid argument `value` has no value.");this.value=k.EMPTY,t&&t instanceof k?this.value=t.toString():t&&"[object String]"===Object.prototype.toString.call(t)&&k.isGuid(t)&&(this.value=t),this.equals=function(t){return k.isGuid(t)&&this.value===t},this.isEmpty=function(){return this.value===k.EMPTY},this.toString=function(){return this.value},this.toJSON=function(){return this.value}}function A(e){h(e);var n=t("accordion-section",m(e));K.emit("accordion:toggle",{node:n})}function E(t){a(t.node,"is-active");s(t.node.querySelector(".accordion-title"))}function j(t){13===t.keyCode&&o(m(t),"accordion-title")&&A(t)}function S(t){var e=n(".js-accordion");t?x(t.node):e.forEach(function(t){x(t)})}function x(t){t.setAttribute("aria-live","polite"),t.setAttribute("role","tablist"),e(t.children).forEach(function(t){var e=t.querySelector(".accordion-title"),n=t.querySelector(".accordion-content"),r=n.id||k.raw();n.id=r,e.setAttribute("role","tab"),e.setAttribute("tabindex","0"),e.setAttribute("aria-controls",r),o(t,"is-active")&&e.setAttribute("aria-expanded","true");var i=!1;J.accordions.forEach(function(t){t.target===e&&"click"===t.event&&t.fn===A&&(i=!0)}),i||(J.accordions.push({target:e,event:"click",fn:A}),J.accordions.push({target:t,event:"keyup",fn:j}),v(e,"click",A),v(t,"keyup",j))})}function q(){F||(K.on("accordion:bind",S),K.on("accordion:toggle",E),F=!0),K.emit("accordion:bind")}function D(t){p(document.body,"click",D),n(".js-dropdown").forEach(function(t){i(t,"is-active")}),n(".js-dropdown-toggle").forEach(function(t){t.setAttribute("aria-expanded","false")}),p(document,"keydown",O),p(document.body,"focusin",C)}function C(e){e.target&&!t("js-dropdown",e.target)&&K.emit("dropdown:close")}function T(t){if(t){var e=o(t.node,"is-active");K.emit("dropdown:close"),e||(r(t.node,"is-active"),t.target&&t.target.setAttribute("aria-expanded","true"),v(document,"keydown",O)),o(t.node,"is-active")&&(v(document.body,"click",D),v(document.body,"focusin",C))}}function O(t){40===t.keyCode|38===t.keyCode&&t.preventDefault()}function L(){var t=document.querySelector(".js-dropdown.is-active");return t||!1}function H(t){var e=document.activeElement,n=t.links.indexOf(e);-1===n?n=t.forward?0:t.links.length-1:t.forward?(n+=1)===t.links.length&&(n=0):-1===(n-=1)&&(n=t.links.length-1),t.links[n].focus()}function M(){var t=L();if(t){var e=n(".dropdown-link",t);K.emit("dropdown:focus",{links:e,forward:!0})}}function P(){var t=L();if(t){var e=n(".dropdown-link",t);K.emit("dropdown:focus",{links:e,forward:!1})}}function z(e){b(e),h(e);var n=t("js-dropdown",e.target);K.emit("dropdown:toggle",{node:n,target:e.target})}function N(){Q||(K.on("dropdown:toggle",T),K.on("dropdown:close",D),K.on("keyboard:escape",D),K.on("keyboard:arrow:down",M),K.on("keyboard:arrow:up",P),K.on("dropdown:focus",H),Q=!0),n(".js-dropdown-toggle").forEach(function(t){var e=!1;J.dropdowns.forEach(function(n){n.target===t&&"click"===n.event&&n.fn===z&&(e=!0)}),e||(J.dropdowns.push({target:t,event:"click",fn:z}),v(t,"click",z))})}function $(){function e(t){if(!t||t.all)g.forEach(function(t){t.removeAttribute("tabindex"),i(t,"is-active")});else{var e=document.querySelector('.js-drawer[data-drawer="'+t.id+'"]');e&&(e.removeAttribute("tabindex"),i(e,"is-active"))}l([m,h]),p(document,"focusin",a),i(document.documentElement,"drawer-no-overflow"),t&&!t.fromOpen&&setTimeout(function(){i(s,"overflow-hidden"),i(f,"overflow-scroll")},300)}function a(e){t("js-drawer",e.target)||g.forEach(function(t){o(t,"is-active")&&t.focus()})}function c(t){o(t.target,"js-drawer")&&K.emit("drawer:close",{fromOpen:!1,all:!0})}function d(t){b(t);var e=t.target.getAttribute("data-drawer");K.emit("drawer:open",{id:e})}var s=document.documentElement,f=document.body,m=document.querySelector(".wrapper"),h=document.querySelector(".footer"),w=n(".js-drawer-toggle"),g=n(".js-drawer");K.on("drawer:open",function(t){K.emit("drawer:close",{fromOpen:!0});var e=document.querySelector('.js-drawer[data-drawer="'+t.id+'"]');e.setAttribute("tabindex",0),r(e,"is-active"),r(s,"overflow-hidden"),s.offsetHeight>s.clientHeight&&r(f,"overflow-scroll"),u([m,h]),v(e,"click",c),v(document,"focusin",a)}),K.on("keyboard:escape",e),K.on("drawer:close",e),K.on("drawer:bind",function(t){t?v(t.node,"click",d):w.forEach(function(t){v(t,"click",d)})}),K.emit("drawer:bind")}function B(){function d(e){var n=t("js-filter-dropdown",e.target);return{parent:n,id:n.getAttribute("data-filter-dropdown"),item:e.target}}function u(t){h(t);var e=d(t);K.emit("filterDropdown:input:focus",e)}function l(t){b(t),h(t);var e=d(t);K.emit("filterDropdown:select",e)}function s(t){t.preventDefault();var e=d(t);a(t.target,"is-active"),K.emit("filterDropdown:toggle",e)}function f(t){c(document.querySelectorAll(".filter-dropdown-list"));var e=n(".js-filter-dropdown-open"),o=n(".js-filter-dropdown-close");e.forEach(function(t){return r(t,"is-active")}),o.forEach(function(t){return i(t,"is-active")})}function p(t){t.preventDefault();var e=d(t);e.i=t.target.getAttribute("data-item-id"),K.emit("filterDropdown:select:remove",e)}K.on("filterDropdown:bind",function(){n(".js-filter-dropdown").forEach(function(t){var n=t.getAttribute("data-filter-dropdown"),o=t.querySelector(".filter-dropdown-input");v(o,"focus",u);for(var a=t.querySelectorAll(".js-filter-dropdown-open"),c=0;c<a.length;c++){var d=a[c];d.setAttribute("data-id",n),v(d,"click",s)}for(var f=t.querySelectorAll(".js-filter-dropdown-close"),p=0;p<f.length;p++){var m=f[p];m.setAttribute("data-id",n),v(m,"click",s)}for(var b=t.querySelectorAll(".filter-dropdown-link"),h=0;h<b.length;h++){var w=b[h];w.setAttribute("data-item-id",h),v(w,"click",l)}v(o,"keyup",function(t){var n=e(b);n.forEach(function(t){r(t,"hide")}),function(t,e){return e.filter(function(e){var n=t.toLowerCase();return-1!==e.innerHTML.toLowerCase().indexOf(n)})}(o.value,n).forEach(function(t){i(t,"hide")})})})}),K.on("filterDropdown:select",function(t){a(t.item,"is-active")}),K.on("filterDropdown:select",function(t){var e=t.parent.querySelectorAll(".filter-dropdown-link.is-active"),n={parent:t.parent,id:t.id,active:e};K.emit("filterDropdown:active",n)}),K.on("filterDropdown:select:remove",function(t){i(t.parent.querySelectorAll(".filter-dropdown-link.is-active")[t.i],"is-active");var e=t.parent.querySelectorAll(".filter-dropdown-link.is-active"),n={parent:t.parent,id:t.id,active:e};K.emit("filterDropdown:active",n)}),K.on("filterDropdown:active",function(t){K.emit("filterDropdown:active:clear",t);var e=t.parent.querySelector(".js-filter-dropdown-no-filters");t.active.length>0?r(e,"hide"):i(e,"hide");for(var n=0;n<t.active.length;n++){var o='<span class="filter-dropdown-active">\n        '+t.active[n].innerHTML+'\n        <a class="filter-dropdown-remove" href="#" data-item-id=\''+n+'\'>\n          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 32 32" class="svg-icon"><path d="M18.404 16l9.9 9.9-2.404 2.404-9.9-9.9-9.9 9.9L3.696 25.9l9.9-9.9-9.9-9.898L6.1 3.698l9.9 9.899 9.9-9.9 2.404 2.406-9.9 9.898z"/></svg>\n        </a>\n      </span>';t.parent.insertAdjacentHTML("beforeend",o),v(t.parent.querySelector('.filter-dropdown-remove[data-item-id="'+n+'"]'),"click",p)}}),K.on("filterDropdown:active:clear",function(t){for(var e=t.parent.querySelectorAll(".filter-dropdown-active"),n=0;n<e.length;n++)t.parent.removeChild(e[n])}),K.on("filterDropdown:toggle",function(t){o(t.parent.querySelector(".filter-dropdown-list"),"is-active")?K.emit("filterDropdown:close",t):K.emit("filterDropdown:open",t)}),K.on("filterDropdown:open",function(t){f(),r(t.parent.querySelector(".filter-dropdown-list"),"is-active");var e=n(".js-filter-dropdown-close",t.parent);n(".js-filter-dropdown-open",t.parent).forEach(function(t){return i(t,"is-active")}),e.forEach(function(t){return r(t,"is-active")})}),K.on("filterDropdown:close",f),K.on("keyboard:escape",f),K.emit("filterDropdown:bind")}function I(){function t(){var t=[];return m&&t.push(m),b&&t.push(b),t}function e(e){if(e&&e.id){var n=document.querySelector('.js-modal[data-modal="'+e.id+'"]');i(n,"is-active"),n.setAttribute("tabindex",0),p(document,"keydown",o),l(t())}else c(w);e&&e.fromOpen||setTimeout(function(){i(s,"overflow-hidden"),i(f,"overflow-scroll")},300)}function o(t){("Tab"===t.key||9===t.keyCode)&&(t.shiftKey?document.activeElement===a&&(d&&d.focus(),t.preventDefault()):document.activeElement===d&&(a&&a.focus(),t.preventDefault()))}var a,d,s=document.documentElement,f=document.body,m=document.querySelector(".wrapper"),b=document.querySelector(".footer"),h=n(".js-modal-toggle"),w=n(".js-modal");K.on("modal:open",function(e){if(K.emit("modal:close",{fromOpen:!0}),e&&e.id){var i=document.querySelector('.js-modal[data-modal="'+e.id+'"]');i.removeAttribute("tabindex"),v(document,"keydown",o),r(i,"is-active"),r(s,"overflow-hidden"),s.offsetHeight>s.clientHeight&&r(f,"overflow-scroll"),u(t());var c=n("button, [href], input, select, textarea, [tabindex]",i).filter(function(t){return!t.disabled&&-1!==t.tabIndex&&t.offsetHeight>0});a=c.shift(),d=c.pop(),a&&a.focus()}}),K.on("keyboard:escape",e),K.on("modal:close",e),K.on("modal:bind",function(t){t?v(t,"click",R):h.forEach(function(t){var e=!1;J.modals.forEach(function(n){n.target===t&&"click"===n.event&&n.fn===R&&(e=!0)}),e||(J.modals.push({target:t,event:"click",fn:R}),v(t,"click",R))})}),K.emit("modal:bind")}function R(e){b(e);var n=t("js-modal-toggle",e.target).getAttribute("data-modal"),r=document.querySelector('.js-modal[data-modal="'+n+'"]');r&&!o(r,"is-active")?K.emit("modal:open",{id:n}):K.emit("modal:close")}function Y(){function t(t){var e=t.querySelector(".js-search-icon"),n=t.querySelector(".js-close-icon");a(e,"hide"),a(n,"hide"),a(d,"is-active"),a(document.body,"overflow-hidden"),K.emit("search:focus")}function r(t){b(t),K.emit("search:toggle",t.target)}var c=n(".js-search-toggle"),d=n(".js-search")[0];K.on("search:bind",function(t){t?v(t,"click",r):c.forEach(function(t){v(t,"click",r)})}),K.on("search:toggle",t),K.on("keyboard:escape",function(){if(d&&o(d,"is-active")){i(d,"is-active"),i(document.body,"overflow-hidden"),e(c).forEach(t);var n=document.querySelector(".js-search-input");n&&n.blur()}}),K.on("search:focus",function(){document.querySelector(".js-search-input").focus()}),K.emit("search:bind")}function G(){function t(t){window.location.assign(t.currentTarget.value)}K.on("selectnav:bind",function(){e.forEach(function(e){v(e,"change",t)})});var e=n(".js-select-nav");K.emit("selectnav:bind")}function V(){K.on("scrolling:at",function(e){t.forEach(function(t){var n=t.element;if(o(t.element,"is-sticky")){var r=t.element.getAttribute("data-sticky-id");n=document.querySelector('.js-shim[data-sticky-id="'+r+'"]')}if(n){var i=n.getAttribute("data-top")||0;t.top=n.offsetTop-parseInt(i,0)}t.top<e?K.emit("sticky:stick",t):K.emit("sticky:unstick",t)})}),K.on("sticky:stick",function(t){var e=t.element.getAttribute("data-sticky-id"),n=document.querySelector('.js-shim[data-sticky-id="'+e+'"]');e&&n&&(r(t.element,"is-sticky"),n.style.display="")}),K.on("sticky:unstick",function(t){var e=t.element.getAttribute("data-sticky-id"),n=document.querySelector('.js-shim[data-sticky-id="'+e+'"]');e&&n&&(i(t.element,"is-sticky"),n.style.display="none")});var t=n(".js-sticky").map(function(t){var e=t.offsetTop,n=t.getAttribute("data-top")||0;t.style.top=n+"px";return t.getAttribute("data-sticky-id")||function(t){var e=k.raw();t.setAttribute("data-sticky-id",e);var n=t.parentNode,o=t.cloneNode("deep");r(o,"js-shim"),i(o,"js-sticky"),o.setAttribute("data-sticky-id",e),o.style.visibility="hidden",o.style.display="none",n.insertBefore(o,t)}(t),{top:e-parseInt(n,0),element:t}})}function _(){function r(t){var e=t.getAttribute("data-tab");if(e)return e;var n=k.raw();return t.setAttribute("data-tab",n),n}function i(e){var n=e.target;o(n,"js-tab")||(n=e.currentTarget);var i=t("js-tab-group",n);return{parent:i,id:r(i),active:n}}function a(t){t.preventDefault();var e=i(t);K.emit("tabs:active",e)}function c(t){var n=i(t);if(13!==t.keyCode&&32!==t.keyCode||(t.preventDefault(),K.emit("tabs:active",n)),39===t.keyCode||37===t.keyCode){var r=e(n.parent.querySelectorAll(".js-tab")),a=r.indexOf(document.activeElement);if(a>-1&&o(document.activeElement,"js-tab")){var c=r[a+1]||r[0],d=r[a-1]||r[r.length-1];(39===t.keyCode?c:d).focus()}}}K.on("tabs:bind",function(){var t=n(".js-tab"),e=n(".js-tab-group"),i=n(".js-tab-section");e.forEach(function(t){t.setAttribute("aria-live","polite"),r(t),t.children[0].setAttribute("role","tablist");for(var e=t.querySelectorAll(".js-tab"),n=100/e.length,o=0;o<e.length;o++)e[o].style.maxWidth=n+"%"}),t.forEach(function(t){t.setAttribute("aria-expanded","false"),t.setAttribute("role","tab"),t.setAttribute("tabindex","0"),v(t,"click",a),v(t,"keydown",c)}),i.forEach(function(t){t.setAttribute("role","tabpanel"),o(t,"is-active")?t.setAttribute("aria-expanded",!0):t.setAttribute("aria-expanded",!1)})}),K.on("tabs:active",function(t){var n=t.parent,o=e(n.querySelectorAll(".js-tab")),r=t.active,i=e(n.querySelectorAll(".js-tab-section")),a=i[o.indexOf(r)];o.forEach(function(t){t.setAttribute("aria-expanded",!1)}),r.setAttribute("aria-expanded",!0),d(o,r),i.forEach(function(t){t.setAttribute("aria-expanded",!1)}),a.setAttribute("aria-expanded",!0),d(i,a),r.focus()}),K.emit("tabs:bind")}var J={dropdowns:[],accordions:[],modals:[]};g.prototype={on:function(t,e,n){var o=this.e||(this.e={});return(o[t]||(o[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){function o(){r.off(t,o),e.apply(n,arguments)}var r=this;return o._=e,this.on(t,o,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),o=0,r=n.length;o<r;o++)n[o].fn.apply(n[o].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),o=n[t],r=[];if(o&&e)for(var i=0,a=o.length;i<a;i++)o[i].fn!==e&&o[i].fn._!==e&&r.push(o[i]);return r.length?n[t]=r:delete n[t],this}};var K=new g,W=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i");k.EMPTY="00000000-0000-0000-0000-000000000000",k.isGuid=function(t){return t&&(t instanceof k||W.test(t.toString()))},k.create=function(){return new k([y(2),y(1),y(1),y(1),y(3)].join("-"))},k.raw=function(){return[y(2),y(1),y(1),y(1),y(3)].join("-")};var F=!1,Q=!1;v(document,"keyup",function(t){27===t.keyCode?K.emit("keyboard:escape"):13===t.keyCode?K.emit("keyboard:return"):32===t.keyCode?K.emit("keyboard:space"):38===t.keyCode?K.emit("keyboard:arrow:up"):40===t.keyCode?K.emit("keyboard:arrow:down"):37===t.keyCode?K.emit("keyboard:arrow:left"):39===t.keyCode&&K.emit("keyboard:arrow:right")}),v(window,"scroll",w(function(){K.emit("scrolling:at",window.pageYOffset)},100));var U=[q,function(){function t(t){t.preventDefault();var e=t.target.getAttribute("data-clipboard-target");document.querySelector(e).select(),document.execCommand("copy")}var e=n(".js-copy-to-clipboard");K.on("clipboard:bind",function(n){n?v(n.node,"click",t):e.forEach(function(e){v(e,"click",t)})}),K.emit("clipboard:bind")},N,$,B,I,Y,G,V,_];return{version:"1.2.0",click:f,addEvent:v,removeEvent:p,eventTarget:m,preventDefault:b,stopPropagation:h,throttle:w,hasClass:o,addClass:r,removeClass:i,toggleClass:a,removeActive:c,addActive:function(t){(t=e(t)).forEach(function(t){r(t,"is-active")})},toggleActive:d,toggleAriaHidden:function(t){t.forEach(function(t){t&&("true"!==t.getAttribute("aria-hidden")?t.setAttribute("aria-hidden",!0):t.removeAttribute("aria-hidden"))})},toggleAriaExpanded:s,closest:t,nodeListToArray:e,findElements:n,bus:K,accordion:q,dropdown:N,drawer:$,filterDropdown:B,modal:I,search:Y,selectNav:G,sticky:V,tabs:_,extend:function(t){"function"!=typeof Object.assign&&(Object.assign=function(t){var e=arguments;if(null==t)throw new TypeError("Cannot convert undefined or null to object");t=Object(t);for(var n=1;n<arguments.length;n++){var o=e[n];if(null!=o)for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t});for(var e in t)U.push(t[e]);Object.assign(this,t)},init:function(){U.forEach(function(t){t()})}}});