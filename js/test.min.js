function showLegend(){$("#legend-button").bind("click",function(){$(".legend").toggleClass("hidden")})}function toggleVisibility(){$(".visibility-toggle-pink").bind("click",function(){$(this).toggleClass("pink")}),$(".visibility-toggle-gold").bind("click",function(){$(this).toggleClass("gold")}),$(".visibility-toggle-purple").bind("click",function(){$(this).toggleClass("purple")}),$(".visibility-toggle-blue").bind("click",function(){$(this).toggleClass("blue")}),$(".visibility-toggle-orange").bind("click",function(){$(this).toggleClass("orange")}),$(".visibility-toggle-green").bind("click",function(){$(this).toggleClass("green")})}function toggleMenu(){$("#menu-icon-div").bind("click",function(){$("#mobile-menu").toggleClass("hidden"),$("#viewDiv").toggleClass("hidden"),$("#footer").toggleClass("hidden")}),$(".menu-bottom-border").bind("click",function(){$("#mobile-menu").toggleClass("hidden"),$("#viewDiv").toggleClass("hidden"),$("#footer").toggleClass("hidden")})}function turnOnExploreMode(){$("#explore-button").bind("click",function(){$(this).toggleClass("explore-mode-on")})}function changeVisibility(e){console.log("visible was: "+e.visible),0==e.visible?e.visible=!0:e.visible=!1,console.log("visible is: "+e.visible)}function showMobileAmenities(){var e=document.getElementById("mobile-amenities");""==e.style.display?e.style.display="flex":e.style.display=""}function showMobileTransportation(){var e=document.getElementById("mobile-transportation");""==e.style.display?e.style.display="flex":e.style.display=""}function showMobileSafety(){var e=document.getElementById("mobile-safety");""==e.style.display?e.style.display="flex":e.style.display=""}function showMobileAcademics(){var e=document.getElementById("mobile-academics");""==e.style.display?e.style.display="flex":e.style.display=""}function showMobileRecreation(){var e=document.getElementById("mobile-recreation");""==e.style.display?e.style.display="flex":e.style.display=""}function showIcon(){var e=document.getElementById("connectivity-list");-1==e.className.indexOf("w3-show")?e.className+=" w3-show":e.className=e.className.replace(" w3-show","")}function highlightAmenities(){var e=document.getElementById("amenities");""==e.style.borderBottom?e.style.borderBottom="1px solid #5E84A0":e.style.borderBottom=""}function highlightTransportation(){var e=document.getElementById("transportation");""==e.style.borderBottom?e.style.borderBottom="1px solid #5E84A0":e.style.borderBottom=""}function highlightSafety(){var e=document.getElementById("safety");""==e.style.borderBottom?e.style.borderBottom="1px solid #5E84A0":e.style.borderBottom=""}function highlightAcademics(){var e=document.getElementById("academics");""==e.style.borderBottom?e.style.borderBottom="1px solid #5E84A0":e.style.borderBottom=""}function highlightRecreation(){var e=document.getElementById("recreation");""==e.style.borderBottom?e.style.borderBottom="1px solid #5E84A0":e.style.borderBottom=""}function toggleBasemap(){view.map==webmap?(view.map=hybrid_webmap,view.when(function(){hybrid_webmap.addMany([parking_lyr,bus_route_lyr,zones_lyr,labels_lyr,buildings_lyr,colleges_lyr,libraries_lyr,shuttles_lyr,metro_bus_lyr,cafes_lyr,perks_lyr,food_trucks_lyr,bike_repair_lyr,dining_halls_lyr,bike_parking_lyr,bike_repair_lyr,genderinclusive_lyr,emergency_phones_lyr,gardens_lyr,poi_lyr,rec_lyr])})):(view.map=webmap,view.when(function(){webmap.addMany([parking_lyr,bus_route_lyr,zones_lyr,labels_lyr,buildings_lyr,colleges_lyr,libraries_lyr,shuttles_lyr,metro_bus_lyr,cafes_lyr,perks_lyr,food_trucks_lyr,bike_repair_lyr,dining_halls_lyr,bike_parking_lyr,bike_repair_lyr,genderinclusive_lyr,emergency_phones_lyr,gardens_lyr,poi_lyr,rec_lyr])}))}function toggleBuildingLabels(){1==buildings_lyr.labelsVisible?buildings_lyr.labelsVisible=!1:buildings_lyr.labelsVisible=!0}var map,webmap,cad_webmap,terrain_map,poster_webmap,hybrid_webmap,newspaper_webmap,view,homeBtn,app_popup,searchWidget,params,query,foodLabelClass,bldgLabelClass,zonesLabelClass,parkingLabelClass,transitLabelClass,poi_lyr,rec_lyr,stops_lyr,zones_lyr,cafes_lyr,perks_lyr,labels_lyr,gardens_lyr,parking_lyr,shuttles_lyr,colleges_lyr,metro_bus_lyr,buildings_lyr,libraries_lyr,bus_route_lyr,food_trucks_lyr,bike_repair_lyr,dining_halls_lyr,bike_parking_lyr,genderinclusive_lyr,emergency_phones_lyr,pinkMarker,sizeVisVar,greenMarker,yellowMarker,defaultMarker,lightBlueMarker;require(["esri/config","esri/Map","esri/views/MapView","esri/Basemap","esri/WebMap","esri/layers/Layer","esri/layers/FeatureLayer","esri/widgets/Search","esri/widgets/Locate","esri/widgets/Home","esri/widgets/Popup","esri/layers/support/LabelClass","esri/layers/MapImageLayer","esri/core/promiseUtils","esri/core/watchUtils","esri/core/urlUtils","esri/tasks/support/Query","dojo/domReady!"],function(e,i,l,r,a,s,t,o,n,c,d,b,y,m,p,g,_){new d({dockEnabled:!0,dockOptions:{position:"top-right"}});var f={symbol:{type:"text",color:"white",haloColor:[0,0,0,1],haloSize:.85,font:{family:"Arial Unicode MS",size:10,style:"normal",weight:"bold"}},labelPlacement:"above-center",labelExpressionInfo:{expression:"$feature.Name"}},h={symbol:{verticalOffset:{screenLength:150,maxWorldLength:2e3,minWorldLength:30},callout:{type:"line",size:.5,color:[0,0,0],border:{color:[255,255,255]}},type:"text",color:"white",haloColor:[0,0,0,1],haloSize:.85,font:{family:"Arial Unicode MS",size:10,style:"normal",weight:"bold"}},labelPlacement:"above-center",labelExpressionInfo:{expression:"$feature.Name"}};webmap=new a({portalItem:{id:"4fb6663a73744a789b219418bc9ec7a4"}}),poster_webmap=new a({portalItem:{id:"75c6c947af6f4a69b18c45a91d18123e"}}),cad_webmap=new a({portalItem:{id:"aef98fd8151d4ab8aea88671f8e81832"}}),hybrid_webmap=new a({portalItem:{id:"3031bba063774177844fd05b2a788177"}}),newspaper_webmap=new a({portalItem:{id:"75a3ce8990674a5ebd5b9ab66bdab893"}}),terrain_map=new a({portalItem:{id:"5f68957c846942f19d2ac5cb191842c8"}}),(view=new l({container:"viewDiv",map:hybrid_webmap,zoom:14.25,center:[-122.0651608,37.0005721],popup:{highlightEnabled:!1,dockEnabled:!0,dockOptions:{position:"bottom-right"}}})).ui.remove("attribution"),homeBtn=new c({view:view}),view.ui.add(homeBtn,"top-left");var v=new n({view:view});view.ui.add(v,{position:"top-left"}),(searchWidget=new o({view:view,maxSuggestions:35,sources:[{featureLayer:{url:"https://services3.arcgis.com/21H3muniXm83m5hZ/arcgis/rest/services/BusStops/FeatureServer/0"},searchFields:["NAME","STOPTYPE","label_name"],displayField:"label_name",exactMatch:!1,outFields:["label_name","STOPTYPE"],name:"BusStops",placeholder:"Search features..."},{featureLayer:{url:"https://services3.arcgis.com/21H3muniXm83m5hZ/arcgis/rest/services/buildings_app/FeatureServer/0"},searchFields:["BUILDINGNAME","ABBREVSHORT"],displayField:"BUILDINGNAME",exactMatch:!1,outFields:["BUILDINGNAME","ABBREVSHORT"],name:"Buildings",placeholder:"e.g. ISB or Humanities Lecture Hall"},{featureLayer:{url:"https://services3.arcgis.com/21H3muniXm83m5hZ/arcgis/rest/services/BicycleRepair/FeatureServer/0"},searchFields:["amenity"],displayField:"amenity",exactMatch:!1,outFields:["amenity"],name:"Bicycle Infrastructure",placeholder:"e.g. Fix-It or Bike Racks"},{featureLayer:{url:"https://services3.arcgis.com/21H3muniXm83m5hZ/arcgis/rest/services/GenderInclusiveRestrooms/FeatureServer/0"},searchFields:["PopupInfo"],displayField:"PopupInfo",exactMatch:!1,outFields:["PopupInfo"],name:"Facilities",placeholder:"..."},{featureLayer:{url:"https://services3.arcgis.com/21H3muniXm83m5hZ/arcgis/rest/services/rooms/FeatureServer/0"},searchFields:["rooms_lookup_ROOM_NUMBER"],displayField:"rooms_lookup_ROOM_NUMBER",suggestionTemplate:"{rooms_lookup_ROOM_NUMBER} in {buildings_OfficialBuildingName}",exactMatch:!1,outFields:["rooms_lookup_ROOM_NUMBER","buildings_OfficialBuildingName"],name:"Rooms",placeholder:"e.g. 151C or 234"},{featureLayer:{url:"https://services3.arcgis.com/21H3muniXm83m5hZ/arcgis/rest/services/ActiveConstruction/FeatureServer/0"},searchFields:["NAME"],displayField:"NAME",exactMatch:!1,outFields:["NAME"],name:"Campus Zones",placeholder:"e.g. Science Hill or Oakes College"},{featureLayer:{url:"https://services3.arcgis.com/21H3muniXm83m5hZ/arcgis/rest/services/Dining/FeatureServer/0"},searchFields:["Name"],displayField:"Name",exactMatch:!1,outFields:["Name"],name:"Cafes and Restaurants",placeholder:"e.g. Vivas or Owl's Nest"},{featureLayer:{url:"https://services3.arcgis.com/21H3muniXm83m5hZ/arcgis/rest/services/Dining/FeatureServer/1"},searchFields:["Name"],displayField:"Name",exactMatch:!1,outFields:["Name"],name:"Dining Halls",placeholder:"e.g. Porter or Oakes"},{featureLayer:{url:"https://services3.arcgis.com/21H3muniXm83m5hZ/arcgis/rest/services/Dining/FeatureServer/2"},searchFields:["Name"],displayField:"Name",exactMatch:!1,outFields:["Name"],name:"Perk Coffee Houses",placeholder:"e.g. Engineering"},{featureLayer:{url:"https://services3.arcgis.com/21H3muniXm83m5hZ/arcgis/rest/services/Dining/FeatureServer/3"},searchFields:["Name"],displayField:"Name",exactMatch:!1,outFields:["Name"],name:"Food Trucks",placeholder:"e.g. Raymond's"}]})).includeDefaultSources=!1,view.ui.add(searchWidget,{position:"top-right"}),labels_lyr=new t({portalItem:{id:"a3bb6a92e1ff46ac82beea01c05f9673"},visible:!1,labelingInfo:[f],definitionExpression:"CampusZoneType in ('Primary', 'Secondary')"}),(buildings_lyr=new t({portalItem:{id:"9f17f4aed3554b15a189f89b13f36b58"},visible:!0,labelingInfo:[{symbol:{type:"text",color:"black",haloColor:[255,255,255,1],haloSize:.5,font:{family:"Arial Unicode MS",size:9,style:"normal",weight:"bold"}},labelPlacement:"always-horizontal",labelExpressionInfo:{expression:"$feature.ABBREVSHORT"}}]})).labelsVisible=!1,colleges_lyr=new t({portalItem:{id:"de8c23622c384eb6968a7e77d6ba68d9"},visible:!1,labelingInfo:[{symbol:{type:"text",color:[255,255,255,1],haloColor:[0,0,0,1],haloSize:1,font:{family:"Baloo Chettan",size:12,style:"normal",weight:"bold"}},labelPlacement:"always-horizontal",labelExpressionInfo:{expression:"$feature.Name"}}]}),zones_lyr=new t({portalItem:{id:"b32de48939334c9eb0a02aac90ef0fc4"},visible:!1}),parking_lyr=new t({portalItem:{id:"f795b2c9af644ac190cec4d72b767041"},visible:!1,labelingInfo:[{symbol:{type:"text",color:"white",haloColor:[0,0,0,1],haloSize:.85,font:{family:"Arial Unicode MS",size:10,style:"normal",weight:"bold"}},labelPlacement:"always-horizontal",labelExpressionInfo:{expression:"'LOT# ' + $feature.NUM"}}],definitionExpression:"NUMBER is not null"}),poi_lyr=new t({portalItem:{id:"b255a3ac03bf4bda812305f105e6b65c"},visible:!1,labelingInfo:[h]}),rec_lyr=new t({portalItem:{id:"30ba437201bd4a16b90ca8b34ea65a4a"},visible:!1,labelingInfo:[h]}),libraries_lyr=new t({portalItem:{id:"b82d703a18bc469392089b91b413a5f5"},visible:!1,labelingInfo:[h]}),cafes_lyr=new t({portalItem:{id:"02955b4e54374e619acfe592edb4a2f1"},layerId:1,visible:!1,labelingInfo:[h]}),dining_halls_lyr=new t({portalItem:{id:"02955b4e54374e619acfe592edb4a2f1"},layerId:2,visible:!1,labelingInfo:[h]}),perks_lyr=new t({portalItem:{id:"02955b4e54374e619acfe592edb4a2f1"},layerId:3,visible:!1,labelingInfo:[h]}),food_trucks_lyr=new t({portalItem:{id:"02955b4e54374e619acfe592edb4a2f1"},layerId:4,visible:!1,labelingInfo:[h]}),bike_parking_lyr=new t({portalItem:{id:"0e9e0292dce44979a933cb7ca825a740"},visible:!1}),bike_repair_lyr=new t({portalItem:{id:"1a518677568d424499f17e545aecdd62"},visible:!1}),shuttles_lyr=new t({portalItem:{id:"9684474d787e4b45b08d9bba098cf7c3"},visible:!1,labelingInfo:[f],definitionExpression:"STOPTYPE = 'Campus Shuttle'"}),metro_bus_lyr=new t({portalItem:{id:"9684474d787e4b45b08d9bba098cf7c3"},visible:!1,labelingInfo:[f],definitionExpression:"STOPTYPE = 'Santa Cruz Metro'"}),gardens_lyr=new t({portalItem:{id:"2ccfa63e4d764460adcb1f4ea2aff61c"},visible:!1,labelingInfo:[f]}),genderinclusive_lyr=new t({portalItem:{id:"914973a703f743d5b73eb99a2835ecf4"},visible:!1}),emergency_phones_lyr=new t({portalItem:{id:"c67599ead669443dbbb3a5eaa0e376de"},visible:!1}),bus_route_lyr=new t({portalItem:{id:"2280263859654b5e9902a17dc9a195f0"},visible:!1}),view.when(function(){hybrid_webmap.addMany([parking_lyr,bus_route_lyr,zones_lyr,labels_lyr,buildings_lyr,colleges_lyr,libraries_lyr,shuttles_lyr,metro_bus_lyr,cafes_lyr,perks_lyr,food_trucks_lyr,bike_repair_lyr,dining_halls_lyr,bike_parking_lyr,bike_repair_lyr,genderinclusive_lyr,emergency_phones_lyr,gardens_lyr,poi_lyr,rec_lyr]),view.popup.dockEnabled=!0}).catch(function(){alert("ERROR LOADING LAYERS")}),view.when(function(){u=document.URL,params=g.urlToObject(u),(query=new _).where="BUILDINGNAME = '"+params.query.building+"'",query.returnGeometry=!0,console.log(query.where),buildings_lyr.queryExtent(query).then(function(e){setTimeout(function(){view.goTo(e.extent).then(function(){var e=view.zoom-2.5;view.zoom=e,toggleBuildingLabels()})},2e3)})}),toggleVisibility(),toggleMenu(),showLegend()});